
<html><head>
<title>Bezier -  Bezier </title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.toc,UL.toc UL, UL.toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.section, LI.subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.requirements LI, UL.syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<! -- Generated from file 'Bezier.man' by tcllib/doctools with format 'html'
   -->
<! -- Copyright &copy; 2014-2020, by A.Buratti
   -->
<! -- CVS: $Id$ Bezier.n
   -->
<body><div class="doctools">
<h1 class="title">Bezier(n) 1.1  &quot; Bezier &quot;</h1>
<div id="name" class="section"><h2><a name="name">Name</a></h2>
<p>Bezier - Create and manipulate Bezier curvers.</p>
</div>
<div id="toc" class="section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="toc">
<li class="section"><a href="#toc">Table Of Contents</a></li>
<li class="section"><a href="#synopsis">Synopsis</a></li>
<li class="section"><a href="#section1">Description</a></li>
<li class="section"><a href="#section2">INTRODUCTION</a></li>
<li class="section"><a href="#section3">COMMANDS</a></li>
<li class="section"><a href="#section4">METHODS</a></li>
<li class="section"><a href="#section5">DEPRECATED METHODS</a></li>
<li class="section"><a href="#section6">LIMITATIONS</a></li>
<li class="section"><a href="#section7">BUGS, IDEAS, FEEDBACK</a></li>
<li class="section"><a href="#see-also">See Also</a></li>
<li class="section"><a href="#keywords">Keywords</a></li>
<li class="section"><a href="#category">Category</a></li>
<li class="section"><a href="#copyright">Copyright</a></li>
</ul>
</div>
<div id="synopsis" class="section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="synopsis">
<ul class="requirements">
<li>package require <b class="pkgname">Itcl</b></li>
<li>package require <b class="pkgname">Bezier <span class="opt">?1.1?</span></b></li>
</ul>
<ul class="syntax">
<li><a href="#1"><b class="cmd">Bezier::new</b> <i class="arg">point</i> <span class="opt">?<i class="arg">point</i> ...?</span></a></li>
<li><a href="#2"><b class="cmd">Bezier::new</b> {<i class="arg">point</i> <span class="opt">?<i class="arg">point</i> ...?</span>}</a></li>
<li><a href="#3"><i class="arg">bzObj</i> <b class="method">destroy</b></a></li>
<li><a href="#4"><i class="arg">bzObj</i> <b class="method">spaceDim</b></a></li>
<li><a href="#5"><i class="arg">bzObj</i> <b class="method">degree</b></a></li>
<li><a href="#6"><i class="arg">bzObj</i> <b class="method">points</b></a></li>
<li><a href="#7"><i class="arg">bzObj</i> <b class="method">PZero</b></a></li>
<li><a href="#8"><i class="arg">bzObj</i> <b class="method">point</b> <i class="arg">i</i></a></li>
<li><a href="#9"><i class="arg">bzObj</i> <b class="method">point</b> <i class="arg">i</i> <i class="arg">point</i></a></li>
<li><a href="#10"><i class="arg">bzObj</i> <b class="method">clone</b></a></li>
<li><a href="#11"><i class="arg">bzObj</i> <b class="method">polylength</b></a></li>
<li><a href="#12"><i class="arg">bzObj</i> <b class="method">baselength</b></a></li>
<li><a href="#13"><i class="arg">bzObj</i> <b class="method">at</b> <i class="arg">t</i></a></li>
<li><a href="#14"><i class="arg">bzObj</i> <b class="method">derivative</b></a></li>
<li><a href="#15"><i class="arg">bzObj</i> <b class="method">tangent_at</b> <i class="arg">t</i></a></li>
<li><a href="#16"><i class="arg">bzObj</i> <b class="method">vtangent_at</b> <i class="arg">len</i> <i class="arg">t</i></a></li>
<li><a href="#17"><i class="arg">bzObj</i> <b class="method">normal_at</b> <i class="arg">t</i></a></li>
<li><a href="#18"><i class="arg">bzObj</i> <b class="method">vnormal_at</b> <i class="arg">len</i> <i class="arg">t</i></a></li>
<li><a href="#19"><i class="arg">bzObj</i> <b class="method">split_at</b> <i class="arg">t</i> <span class="opt">?<i class="arg">side</i>?</span></a></li>
<li><a href="#20"><i class="arg">bzObj</i> <b class="method">length</b> <span class="opt">?<b class="const">-tolerance</b> <i class="arg">tolerance</i>?</span></a></li>
<li><a href="#21"><i class="arg">bzObj</i> <b class="method">length_at</b> <i class="arg">t</i> <span class="opt">?<b class="const">-tolerance</b> <i class="arg">tolerance</i>?</span></a></li>
<li><a href="#22"><i class="arg">bzObj</i> <b class="method">almostFlat</b> <i class="arg">tolerance</i></a></li>
<li><a href="#23"><i class="arg">bzObj</i> <b class="method">invlength</b> <i class="arg">len</i> <span class="opt">?<b class="const">-tolerance</b> <i class="arg">tolerance</i>?</span></a></li>
<li><a href="#24"><i class="arg">bzObj</i> <b class="method">t_splitUniform</b> <i class="arg">dl</i> <span class="opt">?<i class="arg">pLen</i>?</span> <span class="opt">?<b class="const">-tolerance</b> <i class="arg">tolerance</i>?</span></a></li>
<li><a href="#25"><i class="arg">bzObj</i> <b class="method">t_splitLeftOver</b></a></li>
<li><a href="#26"><i class="arg">bzObj</i> <b class="method">flatnesstolerance</b></a></li>
<li><a href="#27"><i class="arg">bzObj</i> <b class="method">flatnesstolerance</b> <i class="arg">val</i></a></li>
</ul>
</div>
</div>
<div id="section1" class="section"><h2><a name="section1">Description</a></h2>
</div>
<div id="section2" class="section"><h2><a name="section2">INTRODUCTION</a></h2>
<p>This package provides methods for manipulating Bezier's curves 
(see <a href="http://en.wikipedia.org/wiki/Bezier_curve">Wikipedia</a> for a thorough introduction)</p>
<p>A Bezier curve is represented by an <b class="package">Itcl</b> object and manipulated by various methods.
Other than basic methods for basic operations, you can find more elaborated
methods for computing the curve lenght, the tangent and the normal vector, and for subdiving the curves in equally spaced segments.</p>
<p>With this package you can represent curves of any degree in a n-dimensional space.</p>
</div>
<div id="section3" class="section"><h2><a name="section3">COMMANDS</a></h2>
<p>Given a list of <em>control-points</em> (each control-point represented as a list of real-numbers), 
the <b class="cmd">::Bezier::new</b> command returns the (fully qualified) name of a new object
representing a Bezier curve.
Object is created in the caller's namespace</p>
<p>The <b class="cmd">Bezier::new</b> command accepts both a <i class="arg">list-of-points</i> as well as a <i class="arg">sequence-of-points</i></p>
<dl class="definitions">
<dt><a name="1"><b class="cmd">Bezier::new</b> <i class="arg">point</i> <span class="opt">?<i class="arg">point</i> ...?</span></a></dt>
<dd><p>as well as</p></dd>
<dt><a name="2"><b class="cmd">Bezier::new</b> {<i class="arg">point</i> <span class="opt">?<i class="arg">point</i> ...?</span>}</a></dt>
<dd></dd>
</dl>
<p>All points must have the same dimension.</p>
<p>The following example</p>
<pre class="example">
set bzObj1 [Bezier::new {0.0 0.0} {0.5 0.7} {2.5 3.6}]
</pre>
<p>creates a curve made of three 2D control-points.</p>
<p>Note that</p>
<pre class="example">
set bzObj1 [Bezier::new {1.0 2.0 3.0}]
</pre>
<p>is a (degenerated) curve made of one 3D key-point {1.0 2.0 3.0}, whilst</p>
<pre class="example">
set bzObj1 [Bezier::new 1.0 2.0 3.0]
</pre>
<p>is a curve made of  three 1D control-points {1.0} {2.0} {3.0}</p>
</div>
<div id="section4" class="section"><h2><a name="section4">METHODS</a></h2>
<p>The following commands are possible for a Bezier-object:</p>
<dl class="definitions">
  
<dt><a name="3"><i class="arg">bzObj</i> <b class="method">destroy</b></a></dt>
<dd><p>destroys the object, including its storage space and associated command.</p></dd>
<dt><a name="4"><i class="arg">bzObj</i> <b class="method">spaceDim</b></a></dt>
<dd><p>returns the dimension of each control-points of the curve (all points in a given curve MUST have the same dimension)</p></dd>
<dt><a name="5"><i class="arg">bzObj</i> <b class="method">degree</b></a></dt>
<dd><p>returns the the curve degree (i.e. the number of control-points less one).
Often referred as <i class="arg">curve's order</i></p></dd>
<dt><a name="6"><i class="arg">bzObj</i> <b class="method">points</b></a></dt>
<dd><p>returns the list of control-points</p></dd>
<dt><a name="7"><i class="arg">bzObj</i> <b class="method">PZero</b></a></dt>
<dd><p>returns the Point-Zero (as a list of real numbers) with dimension equal to the curve dimension.
e.g if <i class="arg">bzObj</i> is a curve of 3D points, [bzObj PZero] returns {0.0 0.0 0.0}</p></dd>
<dt><a name="8"><i class="arg">bzObj</i> <b class="method">point</b> <i class="arg">i</i></a></dt>
<dd><p>returns the <i class="arg">i</i>-th control-point</p></dd>
<dt><a name="9"><i class="arg">bzObj</i> <b class="method">point</b> <i class="arg">i</i> <i class="arg">point</i></a></dt>
<dd><p>replaces the <i class="arg">i</i>-th control-point with the new <i class="arg">point</i>.</p>
<p>Note that you can also use expressions like &quot;end&quot; &quot;end-1&quot; as indexes
If <i class="arg">i</i> is out of range or new <i class="arg">point</i>'s dimension is different from the dimension of the other points of the curve,
then an error is raised.</p></dd>
<dt><a name="10"><i class="arg">bzObj</i> <b class="method">clone</b></a></dt>
<dd><p>creates a new clone of this curve.
The new curve is created in the caller's namespace.
It's caller responsability to delete it after use.</p></dd>
<dt><a name="11"><i class="arg">bzObj</i> <b class="method">polylength</b></a></dt>
<dd><p>returns the length of the control-polygon</p></dd>
<dt><a name="12"><i class="arg">bzObj</i> <b class="method">baselength</b></a></dt>
<dd><p>returns the distance between the first and the last control-point</p></dd>
<dt><a name="13"><i class="arg">bzObj</i> <b class="method">at</b> <i class="arg">t</i></a></dt>
<dd><p>evaluates B(t)   (0.0&lt;=<i class="arg">t</i>&lt;=1.0)</p>
<p>B(t) is the parametric form of the Bezier's curve</p></dd>
<dt><a name="14"><i class="arg">bzObj</i> <b class="method">derivative</b></a></dt>
<dd><p>returns a new Bezier's curve of degree n-1.
Derivative of a degenerate 0-degree curve is still a 0-degree curve</p>
<p>NOTE: it's caller responsability to delete it after use</p></dd>
<dt><a name="15"><i class="arg">bzObj</i> <b class="method">tangent_at</b> <i class="arg">t</i></a></dt>
<dd><p>returns the (normalized) tangent-vector at B(t) (0.0&lt;=<i class="arg">t</i>&lt;=1.0)</p>
<p>NOTE: degree-0 curves have no tangent (nor normal); in such cases an 
arbitrary normalized vector is returned.</p></dd>
<dt><a name="16"><i class="arg">bzObj</i> <b class="method">vtangent_at</b> <i class="arg">len</i> <i class="arg">t</i></a></dt>
<dd><p>returns a segment (a list of two points) whose length is <i class="arg">len</i>, with origin in
[<i class="arg">bzObj</i> <b class="method">at</b> <i class="arg">t</i>] and the same direction of
[<i class="arg">bzObj</i> <b class="method">tangent_at</b> <i class="arg">t</i>].</p>
<p>Difference between  <b class="method">tangent_at</b> and <b class="method">vtangent_at</b>:</p>
<pre class="example">
 set bObj [Bezier::new {1 1} {2 2} {3 1}]
 set tg [$bObj tangent_at 0.5]
 # tg is  the vector {1.0 0.0}
 set vtg [$bObj vtangent_at 2 0.5]
 # vtg is the segment {{2.0 1.5} {4.0 1.5}}  i.e. a segment with origin in {2.0 1.5}, length 2 and direction {1.0 0.0}
</pre>
</dd>
<dt><a name="17"><i class="arg">bzObj</i> <b class="method">normal_at</b> <i class="arg">t</i></a></dt>
<dd><p>returns the normal-vector at B(t) (0.0&lt;=<i class="arg">t</i>&lt;=1.0).</p>
<p>NOTE: meaningful only for 2D curves; in other cases it returns Point-Zero.</p></dd>
<dt><a name="18"><i class="arg">bzObj</i> <b class="method">vnormal_at</b> <i class="arg">len</i> <i class="arg">t</i></a></dt>
<dd><p>returns a segment (a list of two points) whose length is <i class="arg">len</i>, with origin in
[<i class="arg">bzObj</i> <b class="method">at</b> <i class="arg">t</i>] and the same direction of
[<i class="arg">bzObj</i> <b class="method">normal_at</b> <i class="arg">t</i>].</p>
<p>NOTE: meaningful only for 2D curves; in other cases result is Point-Zero.</p></dd>
<dt><a name="19"><i class="arg">bzObj</i> <b class="method">split_at</b> <i class="arg">t</i> <span class="opt">?<i class="arg">side</i>?</span></a></dt>
<dd><p>splits the curve at B(<i class="arg">t</i>) (0.0&lt;=<i class="arg">t</i>&lt;=1.0) and returns the <b class="const">left</b>
or the <b class="const">right</b> or <b class="const">both</b> sides, based on the optional parameter <i class="arg">mode</i> (default is <b class="const">both</b>).</p>
<p>The returned value is a new Bezier curve, or a list with two curves.
It's caller's responsability to delete the returned curve(s) curves after use.</p>
<p>NOTE: Algorithm adapted from Earl Boeber's work:
    &quot;Computing the arc length of cubic bezier curves&quot;</p></dd>
<dt><a name="20"><i class="arg">bzObj</i> <b class="method">length</b> <span class="opt">?<b class="const">-tolerance</b> <i class="arg">tolerance</i>?</span></a></dt>
<dd><p>returns the approximated length of the curve, accordling to the algorithm by J.Gravesen.
Approximation is controlled by the <i class="arg">tolerance</i> value; a positive value is used as an absolute tolerance;
a negative value will determine an absolute tolerance as <i class="arg">L0</i>*abs(<i class="arg">tolerance</i>) where <i class="arg">L0</i> is a first simple approximation of the curve's length.
You can change the default value for <i class="arg">tolerance</i> by setting the global
variable <b class="const">Bezier::Default(-length.tolerance)</b>.</p></dd>
<dt><a name="21"><i class="arg">bzObj</i> <b class="method">length_at</b> <i class="arg">t</i> <span class="opt">?<b class="const">-tolerance</b> <i class="arg">tolerance</i>?</span></a></dt>
<dd><p>returns the approximated length of the curve from B(0) to B(<i class="arg">t</i>)  (0.0&lt;=<i class="arg">t</i>&lt;=1.0).</p>
<p>If <i class="arg">t</i> &lt; 0.0 then [<i class="arg">bzObj</i> <b class="method">length_at</b> <i class="arg">t</i>] == [<i class="arg">bzObj</i> <b class="method">length_at</b> 0.0] == 0.0.</p>
<p>If <i class="arg">t</i> &gt; 1.0 then [<i class="arg">bzObj</i> <b class="method">length_at</b> <i class="arg">t</i>] == is [<i class="arg">bzObj</i> <b class="method">length_at</b> 1.0] == [<i class="arg">bzObj</i> <b class="method">length</b>].</p>
<p>Approximation is controlled by the <i class="arg">tolerance</i> value. See method <b class="method">length</b>.</p>
<pre class="example">
Properties:
-----------
  [$bzObj length_at 0.0] == 0.0
  [$bzObj length_at 1.0] == [$bzObj length]
  [$bzObj length_at $t0] &lt; [$bzObj length_at $t1]   &lt;==&gt;   $t0 &lt; $t1 
</pre>
</dd>
<dt><a name="22"><i class="arg">bzObj</i> <b class="method">almostFlat</b> <i class="arg">tolerance</i></a></dt>
<dd><p>returns <b class="const">true</b> if all control-points are close (&lt;=<i class="arg">tolerance</i>) to the curve's chord segment.</p></dd>
<dt><a name="23"><i class="arg">bzObj</i> <b class="method">invlength</b> <i class="arg">len</i> <span class="opt">?<b class="const">-tolerance</b> <i class="arg">tolerance</i>?</span></a></dt>
<dd><p>is the inverse of [<i class="arg">bzObj</i> <b class="method">length_at</b> <i class="arg">t</i>].
Given a <i class="arg">len</i>, returns a value <i class="arg">t</i> such that [<i class="arg">bzObj</i> <b class="method">length_at</b> <i class="arg">t</i>] == <i class="arg">len</i>.
Approximation is controlled by the <i class="arg">tolerance</i> value. See method <b class="method">length</b>.</p>
<pre class="example">
Properties:
-----------
  [$bzObj length_at [$bzObj invlength [arg len]]] == [arg len]
  [$bzObj invlength [$bzObj length_at [arg t]]] == [arg t]
  [$bzObj invlength 0.0] == 0.0
  [$bzObj invlength [$obj length]] == 1.0
  [$bzObj invlength [arg $len0]] &lt; [$bzObj invlength [arg $len1]]  &lt;==&gt; [arg len0] &lt; [arg len1]
 Degenerated cases:
   If [arg len] &lt; 0  ==&gt;  [$bzObj invlength [arg $len]] == 0.0
   If [arg len] &gt; [$bzObj length]  ==&gt;  [$bzObj invlength [arg $len]] == 1.0
</pre>
</dd>
<dt><a name="24"><i class="arg">bzObj</i> <b class="method">t_splitUniform</b> <i class="arg">dl</i> <span class="opt">?<i class="arg">pLen</i>?</span> <span class="opt">?<b class="const">-tolerance</b> <i class="arg">tolerance</i>?</span></a></dt>
<dd><p>returns a list of <i class="arg">t</i> (<i class="arg">t</i> is parameter of curve B(t))
subdividing the curve in subcurves of length <i class="arg">dL</i>.
Optional parameter <i class="arg">pLen</i> (default is 0.0) is the length of the initial part  of the curve to be skipped before the subdivision.</p>
<p>Approximation is controlled by the <i class="arg">tolerance</i> value. 
You can change the default value for <i class="arg">tolerance</i> by setting the global
variable <b class="const">Bezier::Default(-flatness.tolerance)</b>.
Note that after the subdivision there may remain the last part of the curve, whose length is less than <i class="arg">dL</i>.
You can get the length of the last part by calling the <b class="method">splitLeftOver</b> method.</p>
<p>Once you get a list of <i class="arg">t</i>, then you can get a list of equally spaced points, tangents, normals,
by simply calling <b class="method">at</b>, <b class="method">tangent_at</b>, <b class="method">normal_at</b> methods.</p></dd>
<dt><a name="25"><i class="arg">bzObj</i> <b class="method">t_splitLeftOver</b></a></dt>
<dd><p>returns the length of the last part of the curve subdivision after calling the <b class="method">t_splitUniform</b> method.</p></dd>
</dl>
</div>
<div id="section5" class="section"><h2><a name="section5">DEPRECATED METHODS</a></h2>
<p>Method <b class="method">flatnesstolerance</b> is still supported but deprecated; You should use
the  <b class="const">-tolerance</b> option when calling the <b class="method">length</b>, <b class="method">length_at</b>, 
<b class="method">invlength</b> or <b class="method">t_splitUniform</b>, or change the default value by setting
the <b class="const">Bezier::Default(-length.tolerance)</b> variable.</p>
<p>Method <b class="method">flatnesstolerance</b> may still be called, but it has no effect.</p>
<dl class="definitions">
<dt><a name="26"><i class="arg">bzObj</i> <b class="method">flatnesstolerance</b></a></dt>
<dd></dd>
<dt><a name="27"><i class="arg">bzObj</i> <b class="method">flatnesstolerance</b> <i class="arg">val</i></a></dt>
<dd></dd>
</dl>
</div>
<div id="section6" class="section"><h2><a name="section6">LIMITATIONS</a></h2>
<ul class="itemized">
<li><p>Only curves up to degree 10 (just a practical limit)</p></li>
<li><p>Methods <b class="method">normal_at</b> and <b class="method">vnormal_at</b>  are meaningful only for 2D curves ([<i class="arg">bzObj</i> <b class="method">spaceDim</b>] ==2);
for curves having dimension &lt;&gt; 2 result is unpredictable.</p></li>
</ul>
</div>
<div id="section7" class="section"><h2><a name="section7">BUGS, IDEAS, FEEDBACK</a></h2>
<ul class="itemized">
<li><p><b class="package">Bezier</b>-1.0.1 fixes a bug with <b class="package">Itcl</b>-4.0 (i.e. with TclTk-8.6.1)</p></li>
<li><p>-</p></li>
</ul>
</div>
<div id="see-also" class="section"><h2><a name="see-also">See Also</a></h2>
<p><b class="package">BContour</b></p>
</div>
<div id="keywords" class="section"><h2><a name="keywords">Keywords</a></h2>
<p><b class="package">Itcl</b>, math</p>
</div>
<div id="category" class="section"><h2><a name="category">Category</a></h2>
<p>math</p>
</div>
<div id="copyright" class="section"><h2><a name="copyright">Copyright</a></h2>
<p>Copyright &copy; 2014-2020, by A.Buratti</p>
</div>
</div></body></html>   
